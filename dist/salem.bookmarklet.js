!function(){"use strict";$(".intuition-application").remove();var a=function(){window.intuitionApplicationInitialized=!0,angular.module("intuition",[]).controller("roleStriker",["$scope",function(a){var b=function(a){return a&&1===a.which},c=function(a){return a&&3===a.which},d=function(){a.playerBeingEdited=null,a.players=_.map(_.range(0,15),function(a){return{number:a,isSuspicious:!1,votes:{},nominations:{},alignment:null}})};a.alignmentMode=!1,a.toggleAlignmentMode=function(b){3===b.which&&(a.alignmentMode=!a.alignmentMode,d())};var e=function(b){a.playerBeingEdited=b!==a.playerBeingEdited?b:null},f=function(a){a.isDead=!a.isDead},g=function(a,b){a.alignment=a.alignment!==b?b:null};this.actOnPlayer=function(a,d){b(a)?e(d):c(a)&&f(d)},this.markVote=function(a,d,e){return d===e?g(e,"town"):(b(a)?d.votes[e.number]="guilty"!==d.votes[e.number]?"guilty":null:c(a)&&(d.votes[e.number]="innocent"!==d.votes[e.number]?"innocent":null),void console.log("voting player votes",d.votes))},this.markNomination=function(a,b){return a===b?g(b,"mafia"):void(a.nominations[b.number]=!a.nominations[b.number])},d()}]);var a=$('<div class="role-striker-container" ng-controller="roleStriker as playerController" ng-class="{\'alignment-mode\': alignmentMode}"><div class="drag-handle" ng-mousedown="toggleAlignmentMode($event)"></div><div class="players"><div class="player" ng-repeat="player in players" ng-class="{\'editable\': playerBeingEdited !== null, \'player-being-edited\': player === playerBeingEdited, \'is-dead\': player.isDead, \'is-suspicious\': player.isSuspicious, \'is-town\': player.alignment === \'town\', \'is-mafia\': player.alignment === \'mafia\'}"><div class="player-control nomination" ng-class="{\'is-nominating\': playerBeingEdited.nominations[player.number]}" ng-click="playerController.markNomination(playerBeingEdited, player)"></div><div class="player-control vote" ng-class="{\'guilty\': playerBeingEdited.votes[player.number] == \'guilty\', \'innocent\': playerBeingEdited.votes[player.number] == \'innocent\'}" ng-mousedown="playerController.markVote($event, playerBeingEdited, player)"></div><div class="player-control player-number" ng-mousedown="playerController.actOnPlayer($event, player)"></div><div class="player-read" ng-click="player.isSuspicious = !player.isSuspicious"></div></div></div></div>'),b=$("<div />",{"class":"intuition-application"});b.append(a),$(document.body).append(b),angular.bootstrap(b,["intuition"]),$(document.body).attr("oncontextmenu","return false;"),$(".role-striker-container").css({position:"absolute",top:parseFloat(window.localStorage.getItem("containerTop"),10)||0,left:parseFloat(window.localStorage.getItem("containerLeft"),10)||0,width:parseFloat(window.localStorage.getItem("containerWidth"),10)||80,height:parseFloat(window.localStorage.getItem("containerHeight"),10)||200}).draggable({handle:".drag-handle",stop:function(){window.localStorage.setItem("containerTop",$(this).offset().top),window.localStorage.setItem("containerLeft",$(this).offset().left)}}).resizable({stop:function(){window.localStorage.setItem("containerWidth",$(this).width()),window.localStorage.setItem("containerHeight",$(this).height())}})};window.intuitionApplicationInitialized?a():$.getScript("https://code.jquery.com/ui/1.11.2/jquery-ui.min.js",function(){$("<link/>",{rel:"stylesheet",type:"text/css",href:"https://code.jquery.com/ui/1.11.2/themes/black-tie/jquery-ui.css"}).appendTo("head"),$("<link/>",{rel:"stylesheet",type:"text/css",href:"http://true-reality.net/cdn/intuition.css"}).appendTo("head"),$.getScript("https://ajax.googleapis.com/ajax/libs/angularjs/1.3.11/angular.min.js",function(){$.getScript("https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.7.0/underscore-min.js",a)})})}();